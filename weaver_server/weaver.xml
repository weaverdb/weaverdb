<?xml version="1.0"?>
<!DOCTYPE service_bundle SYSTEM "/usr/share/lib/xml/dtd/service_bundle.dtd.1">

<service_bundle type='manifest' name='mks:weaver'>

<service
	name='network/weaver'
	type='service'
	version='1'>

	<!--
	  Because we may have multiple instances of network/http
	  provided by different implementations, we keep dependencies
	  and methods within the instance.
	-->

	<instance name='default' enabled='true'>
		<dependency name='loopback'
		    grouping='require_all'
		    restart_on='error'
		    type='service'>
			<service_fmri value='svc:/network/loopback:default'/>
		</dependency>

		<dependency name='physical'
		    grouping='optional_all'
		    restart_on='error'
		    type='service'>
			<service_fmri value='svc:/network/physical:default'/>
		</dependency>

		<dependency name='multi-user'
		    grouping='require_all'
		    restart_on='error'
		    type='service'>
			<service_fmri value='svc:/milestone/multi-user:default'/>
		</dependency>

		<exec_method
			type='method'
			name='start'
			exec='<<weaver base dir>>/start'
			timeout_seconds='60' />

		<exec_method
			type='method'
			name='stop'
			exec='<<weaver base dir>>/stop'
			timeout_seconds='60' />

		<exec_method
			type='method'
			name='refresh'
			exec='<<weaver base dir>>/refresh'
			timeout_seconds='60' />

	</instance>

	<stability value='Evolving' />

</service>

</service_bundle>
